<script>
    // hash 路由 hashchange
    // H5 history 路由 popState 监听前后 (用户的操作 forward back go)
    // pushState replaceState 监测不到

    window.addEventListener('hashchange', () => {
        console.log(window.location.hash)
    })

    window.addEventListener('popstate', () => {
        console.log('new url', window.location.pathname)
    })

    let names = ['pushState', 'replaceState'];
    for (let name of names) {
        let original = window.history[name];
        window.history[name] = function(...args) {
            console.log('new url', args[2]);
            return original.apply(window.history, args)
        }
    }
</script> 